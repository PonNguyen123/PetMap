/* =========================================================
   PetNourish â€“ Map-First MVP (Full CSS)
   - Google-ish map UI (bottom sheet + fabs)
   - Dark mode support
   - Falling leaves background
   - Tabs + cards + modal + toasts
   ========================================================= */

/* ---------- CSS VARIABLES ---------- */
:root{
  --green-main:#85C88A;
  --green-dark:#4B8F64;

  --bg-cream:#FAF7F2;
  --bg-grad-1:#F3F8FF;
  --bg-grad-2:#FAF7F2;

  --text-main:#1E1E1E;
  --text-muted:#5F5F5F;
  --border-soft:#E6E6E6;
  --white:#FFFFFF;

  --blue:#2E78FF;
  --yellow:#F3C548;
  --red:#E44B4B;

  --radius-card:18px;
  --radius-input:12px;

  --shadow-soft:0 12px 30px rgba(0,0,0,0.06);
  --shadow-strong:0 18px 40px rgba(0,0,0,0.22);

  --z-leaves:0;
  --z-app:1;
  --z-overlay:50;
  --z-toast:60;
}

/* ---------- DARK THEME OVERRIDES ---------- */
body.theme-dark{
  background: radial-gradient(circle at top left, #17231d 0, #090f0c 40%, #050806 100%);
  color:#F5F7F6;

  --bg-cream:#101712;
  --bg-grad-1:#0c1410;
  --bg-grad-2:#0b120e;

  --text-main:#F5F7F6;
  --text-muted:#9BA7A0;
  --border-soft:#27342E;
  --white:#101712;

  --green-main:#7BD89C;
  --green-dark:#3FA46A;
}

/* ---------- RESETS ---------- */
*,
*::before,
*::after{ box-sizing:border-box; }

html{ scroll-behavior:smooth; }

body{
  margin:0;
  min-height:100vh;
  font-family:'Inter', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  color:var(--text-main);
  background: radial-gradient(circle at top left, var(--bg-grad-1) 0, var(--bg-grad-2) 40%, #ffffff 100%);
  opacity:0;
  animation:appFadeIn .45s ease-out forwards;
}

button,input,select,textarea{ font-family:inherit; }

a{ color:inherit; text-decoration:none; }

/* ---------- FALLING LEAVES BACKGROUND ---------- */
.leaf-layer{
  position:fixed;
  inset:0;
  pointer-events:none;
  overflow:hidden;
  z-index:var(--z-leaves);
}

.leaf{
  position:absolute;
  top:-10%;
  font-size:24px;
  opacity:.7;
  filter:drop-shadow(0 4px 4px rgba(0,0,0,.15));
  animation:leafFall 12s linear infinite;
}

.leaf:nth-child(1){ left:5%;  animation-duration:13s; animation-delay:0s; }
.leaf:nth-child(2){ left:15%; animation-duration:14s; animation-delay:-3s; }
.leaf:nth-child(3){ left:25%; animation-duration:12s; animation-delay:-6s; }
.leaf:nth-child(4){ left:35%; animation-duration:16s; animation-delay:-1s; }
.leaf:nth-child(5){ left:45%; animation-duration:15s; animation-delay:-5s; }
.leaf:nth-child(6){ left:55%; animation-duration:13s; animation-delay:-8s; }
.leaf:nth-child(7){ left:65%; animation-duration:17s; animation-delay:-2s; }
.leaf:nth-child(8){ left:75%; animation-duration:14s; animation-delay:-7s; }
.leaf:nth-child(9){ left:85%; animation-duration:16s; animation-delay:-4s; }
.leaf:nth-child(10){ left:12%; animation-duration:18s; animation-delay:-10s; }
.leaf:nth-child(11){ left:52%; animation-duration:19s; animation-delay:-12s; }
.leaf:nth-child(12){ left:82%; animation-duration:15s; animation-delay:-9s; }

body.theme-dark .leaf{ opacity:.55; }

/* ---------- GPS OVERLAY ---------- */
.gps-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:var(--z-overlay);
  backdrop-filter: blur(8px);
}

.gps-card{
  width:min(520px, 92vw);
  border-radius:20px;
  background:var(--bg-cream);
  border:1px solid rgba(0,0,0,.08);
  box-shadow:var(--shadow-strong);
  padding:18px 18px 16px;
  animation:cardRiseIn .35s ease-out forwards;
}

.gps-badge{
  display:inline-flex;
  align-items:center;
  gap:6px;
  font-size:11px;
  padding:4px 10px;
  border-radius:999px;
  background:rgba(133,200,138,.14);
  border:1px solid rgba(133,200,138,.35);
  color:#2D5B3E;
}

.gps-card h2{
  margin:10px 0 0;
  font-family:'Poppins', system-ui, sans-serif;
  font-size:20px;
  line-height:1.2;
}

.gps-actions{
  margin-top:12px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}

body.theme-dark .gps-badge{
  background:rgba(29,61,47,.65);
  border-color:rgba(123,216,156,.55);
  color:#E0F7EA;
}

/* ---------- APP SHELL ---------- */
.app-shell{
  max-width:1180px;
  margin:0 auto;
  padding:20px 14px 28px;
  position:relative;
  z-index:var(--z-app);
}

/* ---------- HEADER ---------- */
.app-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:14px;
  margin-bottom:14px;
}

.brand{
  display:flex;
  align-items:center;
  gap:12px;
  position:relative;
  z-index:1;
}

/* Soft glow orb behind logo */
.brand::before{
  content:"";
  position:absolute;
  width:140px;
  height:140px;
  border-radius:999px;
  background: radial-gradient(circle at 30% 20%,
    rgba(133,200,138,.95) 0,
    rgba(126,229,165,.8) 30%,
    rgba(166,211,230,.7) 60%,
    transparent 100%);
  filter: blur(7px);
  opacity:.9;
  left:-18px;
  top:-42px;
  z-index:-1;
  animation:floatOrb 10s ease-in-out infinite alternate;
}

body.theme-dark .brand::before{
  background: radial-gradient(circle at 30% 20%,
    rgba(123,216,156,.85) 0,
    rgba(63,164,106,.75) 30%,
    rgba(35,74,99,.65) 60%,
    transparent 100%);
  opacity:.85;
}

.logo-circle{
  width:44px;
  height:44px;
  border-radius:999px;
  background:linear-gradient(135deg,var(--green-main),var(--green-dark));
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 10px 20px rgba(75,143,100,.30);
}

.logo-paw{ font-size:22px; }

.brand-text h1{
  margin:0;
  font-family:'Poppins', system-ui, sans-serif;
  font-size:22px;
  font-weight:700;
}

.brand-text p{
  margin:2px 0 0;
  font-size:13px;
  color:var(--text-muted);
}

.header-controls{
  display:flex;
  align-items:center;
  gap:10px;
}

/* ---------- THEME TOGGLE ---------- */
.theme-toggle{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:4px 6px 4px 8px;
  border-radius:999px;
  border:1px solid rgba(0,0,0,.06);
  background:rgba(255,255,255,.90);
  cursor:pointer;
  font-size:11px;
  line-height:1;
  color:var(--text-main);
  box-shadow:0 6px 18px rgba(0,0,0,.05);
  transition:background .2s ease, box-shadow .2s ease, transform .15s ease;
}

.theme-toggle:hover{
  background:#fff;
  box-shadow:0 10px 24px rgba(0,0,0,.08);
  transform:translateY(-1px);
}

.theme-toggle__icon{ font-size:14px; }
.theme-toggle__label{ text-transform:uppercase; letter-spacing:.04em; }

.theme-toggle__pill{
  position:relative;
  width:32px;
  height:16px;
  border-radius:999px;
  background:#E3E7EF;
  display:inline-flex;
  align-items:center;
  padding:2px;
}

.theme-toggle__thumb{
  width:12px;
  height:12px;
  border-radius:999px;
  background:#fff;
  box-shadow:0 1px 3px rgba(0,0,0,.30);
  transform:translateX(0);
  transition:transform .2s ease;
}

body.theme-dark .theme-toggle__thumb{ transform:translateX(14px); }

body.theme-dark .theme-toggle,
body.theme-dark .account-btn{
  background:rgba(16,23,18,.90);
  border-color:rgba(255,255,255,.10);
}

/* ---------- ACCOUNT MENU ---------- */
.account-wrapper{ position:relative; }

.account-btn{
  border-radius:999px;
  padding:4px 10px 4px 4px;
  border:1px solid rgba(0,0,0,.06);
  background:rgba(255,255,255,.90);
  display:flex;
  align-items:center;
  gap:6px;
  cursor:pointer;
  font-size:11px;
  line-height:1.2;
  box-shadow:0 6px 18px rgba(0,0,0,.05);
  transition:background .2s ease, box-shadow .2s ease, transform .15s ease;
}

.account-btn:hover{
  background:#fff;
  transform:translateY(-1px);
  box-shadow:0 10px 24px rgba(0,0,0,.08);
}

.account-avatar{
  width:26px;
  height:26px;
  border-radius:999px;
  background: radial-gradient(circle at 30% 30%, #FFE2C7, #F4A6A6);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:15px;
}

.account-text{
  display:flex;
  flex-direction:column;
  align-items:flex-start;
}

.account-label{
  font-size:10px;
  text-transform:uppercase;
  letter-spacing:.04em;
  color:var(--text-muted);
}

.account-name{ font-size:11px; }

.account-menu{
  position:absolute;
  right:0;
  top:calc(100% + 6px);
  min-width:210px;
  border-radius:16px;
  background:var(--bg-cream);
  box-shadow:0 18px 40px rgba(0,0,0,.26);
  padding:10px 12px 8px;
  opacity:0;
  transform:translateY(6px);
  pointer-events:none;
  transition:opacity .18s ease, transform .18s ease;
  z-index:10;
}

.account-menu.show{
  opacity:1;
  transform:translateY(0);
  pointer-events:auto;
}

.account-menu-title{
  margin:0;
  font-size:11px;
  text-transform:uppercase;
  letter-spacing:.05em;
  color:var(--text-muted);
}

.account-menu-name{
  margin:2px 0 8px;
  font-size:13px;
  font-weight:600;
}

.account-menu-item{
  border-radius:10px;
  border:none;
  width:100%;
  text-align:left;
  padding:7px 9px;
  font-size:12px;
  cursor:pointer;
  background:#EFF3EF;
  color:var(--text-main);
  margin-bottom:6px;
  transition:background .15s ease, transform .1s ease;
}

.account-menu-item:hover{
  background:#E4EBE4;
  transform:translateY(-1px);
}

.account-menu-helper{
  margin:4px 0 0;
  font-size:11px;
  color:var(--text-muted);
}

/* ---------- TABS ---------- */
.top-tabs{
  display:flex;
  gap:8px;
  margin:10px 0 14px;
  flex-wrap:wrap;
}

.tab-btn{
  border:none;
  cursor:pointer;
  border-radius:999px;
  padding:8px 12px;
  font-size:12px;
  font-weight:600;
  background:rgba(255,255,255,.85);
  border:1px solid rgba(0,0,0,.06);
  box-shadow:0 6px 16px rgba(0,0,0,.05);
  transition:transform .12s ease, box-shadow .18s ease, background .18s ease;
}

.tab-btn:hover{
  transform:translateY(-1px);
  box-shadow:0 10px 22px rgba(0,0,0,.08);
}

.tab-btn--active{
  background:linear-gradient(135deg, var(--green-main), var(--green-dark));
  color:#fff;
  border-color:rgba(0,0,0,.0);
}

/* ---------- MAIN / VIEWS ---------- */
.app-main--single{ display:block; }

.view{ display:none; }
.view--active{ display:block; animation:fadeSlide .22s ease-out; }

/* ---------- CARDS / TYPO ---------- */
.card{
  background:var(--bg-cream);
  border-radius:var(--radius-card);
  padding:16px 16px 14px;
  box-shadow:var(--shadow-soft);
  border:1px solid rgba(0,0,0,.03);
  overflow:hidden;
}

body.theme-dark .card{
  background:rgba(12,19,15,.96);
  box-shadow:0 16px 40px rgba(0,0,0,.55);
}

h2{
  margin:0;
  font-family:'Poppins', system-ui, sans-serif;
  font-size:18px;
}

.subtitle{
  margin:4px 0 10px;
  font-size:13px;
  color:var(--text-muted);
}

.helper-text{
  margin:6px 0 0;
  font-size:11px;
  color:var(--text-muted);
}

/* ---------- BUTTONS ---------- */
.btn{
  border-radius:999px;
  border:none;
  font-size:12px;
  padding:8px 14px;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  font-weight:600;
  letter-spacing:.01em;
  transition:background .18s ease, box-shadow .18s ease, transform .10s ease, color .18s ease;
  white-space:nowrap;
}

.btn-primary{
  background:linear-gradient(135deg,var(--green-main),var(--green-dark));
  color:#fff;
  box-shadow:0 10px 20px rgba(75,143,100,.35);
}

.btn-primary:hover{
  transform:translateY(-1px);
  box-shadow:0 14px 26px rgba(75,143,100,.45);
}

.btn-secondary{
  background:#E7EFE9;
  color:#1E4031;
  box-shadow:0 6px 16px rgba(0,0,0,.06);
}

.btn-secondary:hover{
  background:#D9E7DD;
  transform:translateY(-1px);
}

.btn.is-loading{
  position:relative;
  color:transparent !important;
  pointer-events:none;
}

.btn.is-loading::after{
  content:"";
  width:14px;
  height:14px;
  border-radius:999px;
  border:2px solid rgba(255,255,255,.6);
  border-top-color:rgba(255,255,255,.1);
  animation:spin .6s linear infinite;
  position:absolute;
}

/* ---------- FORMS ---------- */
.form-grid{
  display:grid;
  grid-template-columns:repeat(2, minmax(0, 1fr));
  gap:10px 12px;
  margin-bottom:10px;
}

.form-group{
  display:flex;
  flex-direction:column;
  gap:4px;
}

.form-group label{
  font-size:11px;
  font-weight:600;
}

input[type="text"],
input[type="number"],
select,
textarea{
  border-radius:var(--radius-input);
  border:1px solid var(--border-soft);
  padding:8px 10px;
  font-size:12px;
  background:var(--white);
  color:var(--text-main);
  outline:none;
  transition:border-color .15s ease, box-shadow .15s ease, background .15s ease;
}

textarea{ resize:vertical; }

input:focus, select:focus, textarea:focus{
  border-color:var(--green-main);
  box-shadow:0 0 0 1px rgba(133,200,138,.25);
}

.has-error{
  border-color:var(--red) !important;
  box-shadow:0 0 0 1px rgba(228,75,75,.35) !important;
}

.input-error{
  margin:2px 0 0;
  font-size:11px;
  color:var(--red);
}

body.theme-dark input[type="text"],
body.theme-dark input[type="number"],
body.theme-dark select,
body.theme-dark textarea{
  background:#050806;
  border-color:#27342E;
  color:var(--text-main);
}

body.theme-dark input::placeholder,
body.theme-dark textarea::placeholder{ color:#707c76; }

/* ---------- MAP VIEW ---------- */
.map-wrap{
  position:relative;
  border-radius:18px;
  overflow:hidden;
  border:1px solid rgba(0,0,0,.06);
  box-shadow:var(--shadow-soft);
}

.map-canvas{
  width:100%;
  height:72vh;
  min-height:520px;
  background:#ddd;
}

/* Fullscreen map class (on map div) */
.map-expanded{
  position:fixed !important;
  inset:0 !important;
  width:100vw !important;
  height:100vh !important;
  z-index:999 !important;
  border-radius:0 !important;
}

/* lock body scroll when expanded */
.map-expanded-lock{
  overflow:hidden;
}

.map-exit{
  position:absolute;
  top:14px;
  left:14px;
  z-index:1000;
  display:none;
  border:none;
  cursor:pointer;
  width:42px;
  height:42px;
  border-radius:14px;
  background:rgba(255,255,255,.92);
  box-shadow:0 10px 22px rgba(0,0,0,.20);
  font-size:18px;
  align-items:center;
  justify-content:center;
}

.map-exit.show{ display:flex; }

body.theme-dark .map-exit{
  background:rgba(16,23,18,.92);
  color:#fff;
  border:1px solid rgba(255,255,255,.10);
}

/* Map floating buttons */
.map-fab-stack{
  position:absolute;
  top:14px;
  right:14px;
  z-index:1000;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.map-fab{
  border:none;
  cursor:pointer;
  width:44px;
  height:44px;
  border-radius:16px;
  background:rgba(255,255,255,.92);
  box-shadow:0 10px 22px rgba(0,0,0,.18);
  font-size:18px;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:transform .12s ease, box-shadow .18s ease;
}

.map-fab:hover{
  transform:translateY(-1px);
  box-shadow:0 14px 26px rgba(0,0,0,.22);
}

body.theme-dark .map-fab{
  background:rgba(16,23,18,.92);
  color:#fff;
  border:1px solid rgba(255,255,255,.10);
}

/* ---------- BOTTOM SHEET ---------- */
.bottom-sheet{
  position:absolute;
  left:50%;
  bottom:0;
  transform:translateX(-50%);
  width:min(980px, 96%);
  border-radius:22px 22px 0 0;
  background:rgba(250, 247, 242, .95);
  border:1px solid rgba(0,0,0,.08);
  box-shadow:0 -18px 40px rgba(0,0,0,.18);
  z-index:900;
  padding:10px 12px 12px;
  backdrop-filter: blur(10px);
}

body.theme-dark .bottom-sheet{
  background:rgba(12,19,15,.93);
  border-color:rgba(255,255,255,.08);
}

.sheet-grab{
  width:58px;
  height:6px;
  border-radius:999px;
  background:rgba(0,0,0,.15);
  margin:2px auto 10px;
}

body.theme-dark .sheet-grab{ background:rgba(255,255,255,.18); }

.sheet-head{
  display:flex;
  gap:12px;
  justify-content:space-between;
  align-items:flex-start;
}

.sheet-title{
  margin:0;
  font-family:'Poppins', system-ui, sans-serif;
  font-size:16px;
}

.sheet-subtitle{
  margin:4px 0 0;
  font-size:12px;
  color:var(--text-muted);
  max-width:520px;
  line-height:1.4;
}

.sheet-actions{
  display:flex;
  gap:10px;
  align-items:flex-end;
  flex-wrap:wrap;
}

.legend-blue{
  font-weight:700;
  color:var(--blue);
}

/* Search row */
.sheet-body{ margin-top:10px; }

.search-row{
  display:flex;
  gap:10px;
  align-items:flex-end;
}

.search-results{
  margin-top:10px;
  display:flex;
  flex-direction:column;
  gap:8px;
}

.search-empty{
  padding:10px 10px;
  border-radius:14px;
  background:rgba(255,255,255,.70);
  border:1px dashed rgba(0,0,0,.12);
  font-size:12px;
  color:var(--text-muted);
}

body.theme-dark .search-empty{
  background:rgba(16,23,18,.70);
  border-color:rgba(255,255,255,.14);
}

.search-item{
  text-align:left;
  border:none;
  cursor:pointer;
  border-radius:16px;
  padding:10px 12px;
  background:rgba(255,255,255,.92);
  border:1px solid rgba(0,0,0,.06);
  box-shadow:0 6px 14px rgba(0,0,0,.06);
  transition:transform .12s ease, box-shadow .18s ease;
}

.search-item:hover{
  transform:translateY(-1px);
  box-shadow:0 12px 22px rgba(0,0,0,.10);
}

body.theme-dark .search-item{
  background:rgba(16,23,18,.92);
  border-color:rgba(255,255,255,.10);
}

.search-item__title{
  font-weight:700;
  font-size:13px;
  margin-bottom:2px;
  font-family:'Poppins', system-ui, sans-serif;
}

.search-item__sub{
  font-size:11px;
  color:var(--text-muted);
}

/* Stops panel */
.stops-panel{
  margin-top:10px;
  padding-top:10px;
  border-top:1px dashed rgba(0,0,0,.14);
}

body.theme-dark .stops-panel{
  border-top-color:rgba(255,255,255,.14);
}

.stops-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
}

.stops-title{
  margin:0;
  font-family:'Poppins', system-ui, sans-serif;
  font-size:14px;
}

.stops-legend{
  display:flex;
  gap:10px;
  font-size:11px;
  color:var(--text-muted);
}

.legend-dot{
  display:inline-block;
  width:10px;
  height:10px;
  border-radius:999px;
  margin-right:6px;
  vertical-align:middle;
}

.legend-dot--shop{ background:#39B27A; }
.legend-dot--vet{ background:#8B65FF; }

.stops-list{
  margin-top:8px;
  display:flex;
  flex-direction:column;
  gap:8px;
  max-height:220px;
  overflow:auto;
  padding-right:4px;
}

/* Stop card (also used for sitter cards in JS) */
.stop-card{
  display:grid;
  grid-template-columns:auto minmax(0, 1fr) auto;
  gap:10px;
  padding:10px 12px;
  border-radius:16px;
  background:rgba(255,255,255,.92);
  border:1px solid rgba(0,0,0,.06);
  box-shadow:0 6px 14px rgba(0,0,0,.05);
  cursor:pointer;
  transition:transform .12s ease, box-shadow .18s ease, border-color .18s ease;
}

.stop-card:hover{
  transform:translateY(-1px);
  box-shadow:0 12px 22px rgba(0,0,0,.10);
  border-color:rgba(46,120,255,.25);
}

body.theme-dark .stop-card{
  background:rgba(16,23,18,.92);
  border-color:rgba(255,255,255,.10);
  box-shadow:0 10px 28px rgba(0,0,0,.45);
}

.stop-emoji{
  width:40px;
  height:40px;
  border-radius:14px;
  background:linear-gradient(135deg,#F5FFF6,#F3F8FF);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
}

body.theme-dark .stop-emoji{
  background:linear-gradient(135deg,#15271f,#132a21);
}

.stop-main{ min-width:0; }

.stop-name{
  font-family:'Poppins', system-ui, sans-serif;
  font-weight:700;
  font-size:13px;
  line-height:1.2;
  margin-bottom:2px;
}

.stop-sub{
  font-size:11px;
  color:var(--text-muted);
}

.stop-addr{
  margin-top:4px;
  font-size:11px;
  color:var(--text-muted);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.stop-action{
  align-self:center;
  font-weight:800;
  font-size:11px;
  color:var(--red);
  padding:6px 10px;
  border-radius:999px;
  background:rgba(228,75,75,.12);
  border:1px solid rgba(228,75,75,.25);
}

.stop-empty{
  padding:10px;
  border-radius:14px;
  background:rgba(255,255,255,.75);
  border:1px dashed rgba(0,0,0,.12);
  font-size:12px;
  color:var(--text-muted);
}

body.theme-dark .stop-empty{
  background:rgba(16,23,18,.75);
  border-color:rgba(255,255,255,.14);
}

/* Traffic note */
.traffic-note{
  margin-top:10px;
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap;
}

.traffic-pill{
  display:inline-flex;
  align-items:center;
  gap:6px;
  font-size:11px;
  padding:4px 10px;
  border-radius:999px;
  background:rgba(243,197,72,.16);
  border:1px solid rgba(243,197,72,.35);
  font-weight:700;
}

.traffic-text{
  font-size:11px;
  color:var(--text-muted);
}

/* ---------- LEAFLET POPUP BUTTON ---------- */
.popup-btn{
  margin-top:8px;
  width:100%;
  border:none;
  cursor:pointer;
  border-radius:12px;
  padding:8px 10px;
  font-weight:700;
  background:linear-gradient(135deg,var(--red), #b12f2f);
  color:#fff;
}

/* Emoji markers */
.emoji-marker{ background:transparent; border:none; }
.emoji-pin{
  width:28px;
  height:28px;
  border-radius:14px;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(255,255,255,.92);
  border:1px solid rgba(0,0,0,.12);
  box-shadow:0 8px 16px rgba(0,0,0,.15);
  font-size:16px;
}

body.theme-dark .emoji-pin{
  background:rgba(16,23,18,.92);
  border-color:rgba(255,255,255,.14);
}

/* ---------- FOOD VIEW ---------- */
.card-header-row{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:12px;
  flex-wrap:wrap;
}

.food-controls{
  display:grid;
  grid-template-columns: minmax(0, 1.5fr) minmax(0, 1fr) minmax(0, 1fr);
  gap:10px;
  margin:10px 0 10px;
}

.food-grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap:10px;
  margin-top:8px;
}

.food-card{
  border-radius:16px;
  background:rgba(255,255,255,.92);
  border:1px solid rgba(0,0,0,.06);
  box-shadow:0 6px 14px rgba(0,0,0,.05);
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:10px;
  transition:transform .12s ease, box-shadow .18s ease;
}

.food-card:hover{
  transform:translateY(-1px);
  box-shadow:0 12px 22px rgba(0,0,0,.10);
}

body.theme-dark .food-card{
  background:rgba(16,23,18,.92);
  border-color:rgba(255,255,255,.10);
  box-shadow:0 10px 28px rgba(0,0,0,.45);
}

.food-head{
  display:flex;
  justify-content:space-between;
  gap:10px;
  align-items:flex-start;
}

.food-title{
  font-family:'Poppins', system-ui, sans-serif;
  font-weight:700;
  font-size:13px;
}

.food-price{
  font-weight:800;
  color:#2D5B3E;
}

body.theme-dark .food-price{ color:#BDF4D2; }

.food-tags{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
}

.chip{
  font-size:10px;
  padding:4px 8px;
  border-radius:999px;
  background:#F3F5F8;
  color:#505C67;
}

body.theme-dark .chip{
  background:#151f1a;
  color:#C5D1CB;
}

.food-actions{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}

/* Profile summary chip */
.profile-chip{
  margin-top:10px;
  display:inline-flex;
  gap:8px;
  flex-wrap:wrap;
  padding:6px 10px;
  border-radius:999px;
  background:rgba(133,200,138,.12);
  border:1px solid rgba(133,200,138,.30);
  font-size:11px;
  color:#2D5B3E;
  font-weight:700;
}

body.theme-dark .profile-chip{
  background:rgba(29,61,47,.65);
  border-color:rgba(123,216,156,.55);
  color:#E0F7EA;
}

/* ---------- MODAL (Pet Profile) ---------- */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:var(--z-overlay);
  backdrop-filter: blur(8px);
  padding:14px;
}

.modal.show{ display:flex; }

.modal-card{
  width:min(560px, 96vw);
  border-radius:20px;
  background:var(--bg-cream);
  border:1px solid rgba(0,0,0,.08);
  box-shadow:var(--shadow-strong);
  padding:16px 16px 14px;
  animation:cardRiseIn .3s ease-out;
}

.modal-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
}

.icon-btn{
  border:none;
  cursor:pointer;
  width:40px;
  height:40px;
  border-radius:14px;
  background:rgba(255,255,255,.85);
  box-shadow:0 10px 22px rgba(0,0,0,.18);
  font-size:16px;
}

body.theme-dark .modal-card{ background:rgba(12,19,15,.96); }
body.theme-dark .icon-btn{
  background:rgba(16,23,18,.92);
  color:#fff;
  border:1px solid rgba(255,255,255,.10);
}

.modal-actions{
  margin-top:10px;
  display:flex;
  gap:10px;
  justify-content:flex-end;
  flex-wrap:wrap;
}

/* ---------- CARE HELP (reuse stop cards) ---------- */
.sitters-form{
  display:grid;
  grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr) auto;
  gap:10px;
  align-items:flex-end;
  margin-bottom:10px;
}

.sitters-search-btn{ white-space:nowrap; }

/* ---------- TOAST ---------- */
.toast{
  position:fixed;
  left:50%;
  bottom:22px;
  transform:translateX(-50%) translateY(20px);
  background:rgba(17,32,24,.96);
  color:#F5F7F6;
  padding:8px 14px;
  border-radius:999px;
  font-size:12px;
  box-shadow:0 10px 28px rgba(0,0,0,.38);
  opacity:0;
  pointer-events:none;
  transition:opacity .2s ease, transform .2s ease;
  z-index:var(--z-toast);
}

.toast.show{
  opacity:1;
  transform:translateX(-50%) translateY(0);
  pointer-events:auto;
}

/* ---------- LEAFLET DARK TONE (light touch) ---------- */
body.theme-dark .leaflet-tile{
  filter: brightness(.92) contrast(1.05) saturate(.95);
}

/* ---------- RESPONSIVE ---------- */
@media (max-width: 960px){
  .app-header{
    flex-direction:column;
    align-items:flex-start;
  }

  .food-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }

  .food-controls{
    grid-template-columns: minmax(0, 1fr);
  }

  .sitters-form{
    grid-template-columns: minmax(0, 1fr);
  }

  .sheet-head{
    flex-direction:column;
    align-items:flex-start;
  }

  .sheet-actions{
    width:100%;
    justify-content:flex-start;
  }

  .map-canvas{
    height:74vh;
    min-height:520px;
  }
}

@media (max-width: 640px){
  .app-shell{ padding:16px 12px 22px; }

  .brand-text h1{ font-size:20px; }

  .map-canvas{
    height:78vh;
    min-height:520px;
  }

  .search-row{
    flex-direction:column;
    align-items:stretch;
  }

  .food-grid{ grid-template-columns: minmax(0, 1fr); }

  .bottom-sheet{
    width:96%;
    padding:10px 10px 12px;
  }

  .stops-list{
    max-height:200px;
  }
}

/* ---------- ANIMATIONS ---------- */
@keyframes appFadeIn{
  0%{ opacity:0; transform:translateY(8px); }
  100%{ opacity:1; transform:translateY(0); }
}

@keyframes cardRiseIn{
  0%{ opacity:0; transform:translateY(12px); }
  100%{ opacity:1; transform:translateY(0); }
}

@keyframes fadeSlide{
  0%{ opacity:0; transform:translateY(8px); }
  100%{ opacity:1; transform:translateY(0); }
}

@keyframes skeletonShimmer{
  0%{ background-position:200% 0; }
  100%{ background-position:-200% 0; }
}

@keyframes leafFall{
  0%{ transform:translate3d(0, -10vh, 0) rotateZ(0deg); }
  50%{ transform:translate3d(15px, 50vh, 0) rotateZ(90deg); }
  100%{ transform:translate3d(-10px, 110vh, 0) rotateZ(180deg); }
}

@keyframes floatOrb{
  0%{ transform:translate(0,0) scale(1); }
  50%{ transform:translate(6px,4px) scale(1.03); }
  100%{ transform:translate(-4px,6px) scale(.98); }
}

@keyframes spin{
  to{ transform:rotate(360deg); }
}
